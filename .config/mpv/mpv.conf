#VIDEO

#Mitchell-Netravali. The B and C parameters can be set with --scale-param1 and
#--scale-param2. This filter is very good at downscaling (see --dscale).

#catmull_rom uses less resources than lanczos
#spline36 is kinda bad, for upscaling you should use bicubic catrom for preserving spatial proerties
#or a lanczos scaler (like ewa_lanczos or ewa_lanczossharp) for sharpness

#catmull_rom = bicubic b 0 c 0.5
#mitchell = bicubic b 1/3 c 1/3
#hermite = bicubic b 0 c 0

scale=catmull_rom

#--dscale=<filter>
#Like --scale, but apply these filters on downscaling instead.
#If this option is unset, the filter implied by --scale will be applied.

#due to how negative lobes work, mitchell and hermite perform much better for downscaling (less ringing and aliasing)
#hermite is sharper than mitchell
#https://github.com/mpv-player/mpv/pull/12384#issuecomment-1716775594
#https://github.com/mpv-player/mpv/pull/12384#issuecomment-1716855374

dscale=hermite


#catmull_rom, sinc(blackman), ewa_hanning
#For a traditional scaler, is better to use sinc, but it has random performance spikes and
#more resource usage than catmull_rom
cscale=sinc
cscale-window=blackman		#for sinc
cscale-radius=3			#for sinc

#you can also use 'FastBilateral', 'JointBilateral', 'MemeBilateral' or KrigBilateral
#(less to more quality and performance) meme shaders for better chroma
#FastBilateral and JointBilateral may have staircase artifacts
#MemeBilateral is JointBilateral with + CfL (Chroma from Luma prediction), so you can also use FastBilateral and CfL together for better performance
glsl-shader="~~/shaders/FastBilateral.glsl"
#glsl-shader="~~/shaders/CfL_Prediction.glsl"

#there are memes about bilinear cscale being the true way the encoder and encoding software
#intended the chroma to be watched, if you believe them or not is up to you
#cscale=bilinear


#you can use sphinx (smoother) or oversample (less blurry), not a fan of them
#tscale=sphinx
#tscale-blur=0.6991556596428412		#magic haasn number for sphinx



# AUDIO 


#audio-device=alsa/default

#Audio output drivers are interfaces to different audio output facilities.
ao=pipewire,coreauido,pulse,wasapi,

#Load external audio with (almost) the same name as the video
audio-file-auto=fuzzy

volume=100
volume-max=200

# Do not filter audio to keep pitch when changing playback speed.
#audio-pitch-correction=no

# Output 5.1 audio natively, and upmix/downmix audio with a different format.
#audio-channels=5.1
# Output 2.0 audio natively, and upmix/downmix audio with a different format.
audio-channels=stereo
# Disable any automatic remix, _if_ the audio output accepts the audio format.
# of the currently played file. See caveats mentioned in the manpage.
# (The default is "auto-safe", see manpage.)
#audio-channels=auto
#raw bitperfect audio, but you can only hear mpv
audio-exclusive=no


# OTHER

sub-auto=fuzzy

#user-agent="Mozilla/5.0"


# Display English subtitles if available.
slang=en

# Play Finnish audio if available, fall back to English otherwise.
#alang=fi,en

# Change subtitle encoding. For Arabic subtitles use 'cp1256'.
# If the file seems to be valid UTF-8, prefer UTF-8.
# (You can add '+' in front of the codepage to force it.)
#sub-codepage=cp1256

# You can also include other configuration files.
#include=/path/to/the/file/you/want/to/include



# SCREENSHOTS


screenshot-format=png

screenshot-tag-colorspace=no

screenshot-high-bit-depth=no

screenshot-template="mpv-shot-%tY-%tm-%td_%tH-%tM-%tS"

screenshot-directory=~/Pictures/

screenshot-png-compression=9

screenshot-png-filter=0




# HDR TONE MAPPING

dither=fruit

dither-depth=8

#dither-size-fruit=8

#common primaries for modern displays are 'bt.709' (sRGB), 'bt.2020', 'apple' (Apple RGB), 'adobe' (Adobe RGB), 'dci-p3'
target-prim=bt.709

# transfer characteristics (gamma), you can leave it on 'auto', you can also use 'bt.1886', 'srgb', 'linear', 'pq' or another option
target-trc=srgb

#you can leave it on 'auto', sdr is '203'
target-peak=auto

hdr-compute-peak=yes

allow-delayed-peak-detect=yes #better performance

tone-mapping=bt.2390

#tone-mapping-param=1.5

hdr-peak-percentile=100 #better leave it at 100

#tone-mapping-mode=hybrid 	#deprecated https://github.com/mpv-player/mpv/commit/b4c98cb04c87999eccd061cc59e6f5f8fa706220

gamut-mapping-mode=darken

icc-intent=0

#blend-subtitles=yes

#tone-mapping=bt.2446a




# DEBANDING


deband=no



# HARDWARE DECODING


#vulkan uses more resources,but has better hdr compatibility
#if you use d3d11va-copy without opengl or vulkan, it may lead to video/audio desync
#gpu-api=opengl  # Uncomment this if you notice stuttering with vulkan, opengl may cause screen tearing depending of your config
#gpu-api=vulkan  # Comment this if you notice stuttering and uncomment the above line
#gpu-context=winvk
vulkan-async-compute=yes
vulkan-async-transfer=yes
vulkan-queue-count=1
vulkan-device='Intel(R) UHD Graphics 620'
#vulkan-device='NVIDIA GeForce MX110'
#opengl-waitvsync=yes
vd-lavc-dr=yes	#i think this solves screen tearing when using gpu-api=opengl
spirv-compiler=auto

hwdec=auto-safe
#hwdec=auto-copy-safe

#hwdec=vaapi
#hwdec=vulkan
#hwdec=d3d11va-copy	#windows only,  auto-copy uses dxva2-copy instead of d3d11va-copy, but d3d11va-copy is better and has better color
#hwdec=vaapi-copy

#interpolation=yes
#interpolation-threshold=-1
#video-sync=display-resample
video-sync=audio #fix desync on d3d11va-copy when not using gpu-api = opengl or vulkan

#gpu has better performance but gpu-next has better hdr
#vo=gpu
vo=gpu-next




# PROFILES



#bwdif deinterlacing profile

[bwdifdeint]
profile-desc="Deinterlacing mode: bwdif bob"
#deinterlacing, bwdif and w3fdif are better quality than yadif
vf-append=bwdif=deint=1
#deinterlace=yes
#vf=bwdif
#vf-togle=bwdif
#vo-vaapi-deint-mode=bob

[deinterlace-no]
profile-desc="Deinterlacing mode: disabled"
vf-remove=bwdif
deinterlace=no
vf-clr


#[bwdifdeint-autoprofile]
#profile-cond=p["video-format/tff"]
#profile=bwdifdeint
